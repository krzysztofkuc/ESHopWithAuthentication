@using Microsoft.AspNet.Identity
@if (!Request.Browser.IsMobileDevice)
{
    if (Request.IsAuthenticated)
    {
        using (Html.BeginForm("LogOff", "Account", FormMethod.Post, new { id = "logoutForm", @class = "navbar-right" }))
        {
            @Html.AntiForgeryToken()
            <li class="dropdown" id="dropdownMenu1">
                <img src="~/Storage/person-icon-8.png" id="iconPerson1" style="max-height: 45px;" />
                <ul id="user-menu1" class="dropdown-menu clearfix" role="menu">
                    <li><a href="/Manage/Index" style="display: inline-block; width: 100%;"><span class="glyphicon glyphicon-user"></span> &nbsp;&nbsp; @User.Identity.GetUserName()</a></li>
                    <li><a href="/Home/AddPost" style="display: inline-block; width: 100%;"><span class="glyphicon glyphicon-plus-sign"></span> &nbsp;&nbsp; Dodaj</a></li>

                    @if (ViewContext.HttpContext.User.IsInRole("Admin"))
                    {
                        <li><a href="/Manage/ManageRoles" style="display: inline-block; width: 100%;"><span class="glyphicon glyphicon-new-window"></span> &nbsp;&nbsp; Zarządzaj rolami</a></li>
                    }

                    <li><a href="javascript:document.getElementById('logoutForm').submit()"><span class="glyphicon glyphicon-log-out"></span>&nbsp;&nbsp;Wyloguj</a></li>
                </ul>
            </li>
        }
    }
    else
    {
        <li class="nav-item button">
            <a href="/ShoppingCart/Index" class="nav-link" id="trolleyItemsCountId">
                <span id="trolleyItemsCount" class="fa-stack fa-2x has-badge" data-count="@Context.Session["NumberOfAllItems"]">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-shopping-cart fa-stack-1x fa-inverse"></i>
                </span>
            </a>
        </li>
            @*@Html.Partial("_BasketPopupPreview")*@


            @*<li class="nav-item">
                    <div id="basket" class="dropdown-menu" style="border-radius: 7px; padding: 1px 1px 1px 1px;">
                         <a class="dropdown-item" href="#">Action</a>
                        <img id="loaderBasketPreview" src="~/Storage/ajax-loader.gif" style="display:block; margin-left: auto; margin-right: auto;" />
                    </div>
                </li>*@
            <li class="nav-item dropdown">
                <img class="dropdown-toggle" src="~/Storage/person-icon-8.png" id="iconPerson2" style="max-height: 45px;" />
                <div class="dropdown-menu clearfix" role="menu">
                    <a class="dropdown-item" href="/Account/Register" style="display: inline-block; width: 100%;"><span class="glyphicon glyphicon-new-window" id="logIcon"></span> &nbsp;&nbsp; Zarejestruj</a>
                    <a class="dropdown-item" href="/Account/Login" style="display: inline-block; width: 100%;"><span class="glyphicon glyphicon-log-in" id="logIcon"></span> &nbsp;&nbsp; Zaloguj</a>
                    <a class="dropdown-item" href="/Home/Contact" style="display: inline-block; width: 100%;"><span class="glyphicon glyphicon-phone" id="logIcon"></span> &nbsp;&nbsp; Kontakt</a>
                </div>
            </li>
            }
            }
            else
            if (Request.IsAuthenticated)
            {
            @Html.AntiForgeryToken()

            <li><a href="/Manage/Index" style="display: inline-block; width: 100%;"><span class="glyphicon glyphicon-user"></span> &nbsp;&nbsp; @User.Identity.GetUserName()</a></li>
            <li><a href="/Home/AddPost" style="display: inline-block; width: 100%;"><span class="glyphicon glyphicon-plus-sign"></span> &nbsp;&nbsp; Dodaj</a></li>

            if (ViewContext.HttpContext.User.IsInRole("Admin"))
            {
            <li><a href="/Manage/ManageRoles" style="display: inline-block; width: 100%;"><span class="glyphicon glyphicon-new-window"></span> &nbsp;&nbsp; Zarządzaj rolami</a></li>
            }
            <li><a href="javascript:document.getElementById('logoutForm').submit()"><span class="glyphicon glyphicon-log-out"></span>&nbsp;&nbsp;Wyloguj</a></li>
            }
            else
            {
            <li><a href="/Account/Register" style="display: inline-block; width: 100%;"><span class="glyphicon glyphicon-new-window" id="logIcon"></span> &nbsp;&nbsp; Zarejestruj</a></li>
            <li><a href="/Account/Login" style="display: inline-block; width: 100%;"><span class="glyphicon glyphicon-log-in" id="logIcon"></span> &nbsp;&nbsp; Zaloguj</a></li>
            <li><a href="/Home/Contact" style="display: inline-block; width: 100%;"><span class="glyphicon glyphicon-phone" id="logIcon"></span> &nbsp;&nbsp; Kontakt</a></li>
            }

            <style>
                .dropdown:hover .dropdown-menu {
                    display: block;
                    margin-top: 0;
                    cursor: pointer;
                    background-color: #58595B !important;
                    border-radius: 3px;
                    color: red !important;
                }

                .dropdown-menu > li {
                    color: #d5d6d7;
                }
            </style>
